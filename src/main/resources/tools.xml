<tools>
    <tool id="schema-diff" title="Schema diff" projectTypes="inventory">

        <description>Compares structures of two databases</description>
        <parameters>
            <parameter name="p_source_database" title="Source Database" type="string" 
                       required="true"  suggestion="project_databases" width="400"  />

            <parameter name="p_target_database" title="Target Database" 
                       type="string" required="true"  
                       suggestion="project_databases" width="400"  />

            <parameter name="p_show_changes_only" title="Show Changes Only" 
                       type="boolean" required="true"  defaultValue="false" />

          <!--
            <parameter name="p_exclude_objects" title="Exclude Objects" type="string" required="false"
                       multiple="true">
                <values>
                    <string>Tables</string>
                    <string>Views</string>
                    <string>Procedures</string>
                    <string>Columns</string>
                    <string>Parameters</string>
                    <string>Indexes</string>
                    <string>Constraints</string>
                    <string>Foreign Keys</string>
                </values>
            </parameter>

              -->
                       
            <parameter name="p_preprocessing" title="Options" type="string" required="false"
                       multiple="true">
                <values>
                    <string>Normalize source code</string>
                    <string>Ignore view columns</string>
                    <string>Ignore whitespaces</string>
                </values>
            </parameter>     
            
            <parameter name="p_default_schema" title="Default Schema"   
                       type="string" required="false" />
                       
            <parameter name="p_ignore_objects" title="Ignore Objects"   
                       type="text" required="false"  width="100" height="3" />
        </parameters>
        <output  script="schema-diff.groovy" type="html" />
    </tool>


    <tool id="object-diff" title="Object diff" projectTypes="inventory">

        <description>Compares structures of two database objects</description>
        <parameters>
            <parameter name="p_source_database" title="Source Database" type="string" 
                       required="true"  suggestion="project_databases" width="400"  />

            <parameter name="p_target_database" title="Target Database" 
                       type="string" required="true"  
                       suggestion="project_databases" width="400"  />

            <parameter name="p_source_object" title="Source Object" type="string" 
                       required="true"  width="200"  />

            <parameter name="p_target_object" title="Target Object" type="string" 
                       required="true"  width="200"  />

          <!--
            <parameter name="p_exclude_objects" title="Exclude Objects" type="string" required="false"
                       multiple="true">
                <values>
                    <string>Tables</string>
                    <string>Views</string>
                    <string>Procedures</string>
                    <string>Columns</string>
                    <string>Parameters</string>
                    <string>Indexes</string>
                    <string>Constraints</string>
                    <string>Foreign Keys</string>
                </values>
            </parameter>

              -->
        </parameters>
        <output  script="object-diff.groovy" type="html" />
    </tool>


    <tool id="model-diff" title="Model diff" projectTypes="modeling">
        <description>Compares structures of two models</description>

        <parameters>                                                  	
            <parameter name="p_source_model" title="Source Model" type="string" required="true"  suggestion="project_models"  width="400" />
            <parameter name="p_target_model" title="Target Model" type="string" required="true"  suggestion="project_models"  width="400" />
        </parameters>

        <output  script="model-diff.groovy" type="html" />
    </tool>



    <tool id="schema-tracker-snapshot-maker" title="Schema Tracker::Snapshot Maker" projectTypes="inventory">

    <!-- TODO: add parameters like ignore dbs that are not online -->

        <description>TMass Database Synchronization</description>
        <parameters>
            <parameter name="p_database_query" type="string" required="false" title="Database Filter" width="400" />
            <parameter name="p_ignore_nonOnlineDBs" type="boolean" required="true" 
                       title="Ignore Non-Online Databases" defaultValue="true" />
        </parameters>

        <output  script="schema-tracker-snapshot-maker.groovy" type="html" />
    </tool>
    
    <tool id="schema-tracker-notifier" title="Schema Tracker::Notifier" projectTypes="inventory">

    <!-- TODO: ignore errors (when db is offline or is not accessible like mirrored one -->
    <!-- TODO:  The purpose of this tool is to tell there are changes -->

        <description>Mass Database Synchronization Notification</description>
        <parameters>
            <parameter name="p_database_query" type="string" required="false" title="Database Filter" width="400" />
            <parameter name="p_emails" type="string" required="true" title="Notify emails" width="400" />
            <parameter name="p_notify_nochanges" type="boolean" required="false" title="Notify when no changes found" defaultValue="false" />
            <parameter name="p_config_name" type="string" required="true" title="Config name" width="400" />
        </parameters>

        <output  script="schema-tracker-notifier.groovy" type="html" />
    </tool>
    
    <tool id="schema-tracker-change-report" title="Schema Tracker::Change Report" projectTypes="inventory">
        <description>Displays schema(s) change history</description>
        <parameters>
            <parameter name="p_database_query" type="string" required="false" title="Database Filter" width="400" />
            <parameter name="p_from_date" type="date" required="false" title="From"/>
            <parameter name="p_to_date" type="date" required="false" title="To" />
        </parameters>
        <output  script="schema-tracker-change-report.groovy" type="html" />
    </tool>

</tools>
